<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sanjeevani – A Second Chance at Life</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg shadow-sm fixed-top" style="background: linear-gradient(to bottom, #F6F4F0 0%, #f7e7d0 100%);">
        <div class="container">
          <a class="navbar-brand d-flex align-items-center gap-2" href="#">
            <div class="d-flex justify-content-center align-items-center rounded-4" style="width: 44px; height: 44px; background-color: #df684b;">
              <i class="fa-solid fa-heart-pulse" style="color: #F6F4F0; font-size: 24px;"></i>
            </div>
            <div class="d-flex flex-column lh-sm m-1" style="margin-top: 2px;">
              <strong style="color: #df684b; font-size: 20px;">Sanjeevani</strong>
              <small style="font-size: 13px; color: #555;">A Second Chance at Life</small>
            </div>
          </a>
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
          </button>
          
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item"><a class="nav-link " href="/home.html">Home</a></li>
              <li class="nav-item"><a class="nav-link " href="/donor.html">Donate Organ</a></li>
              <li class="nav-item"><a class="nav-link active" href="/request.html">Request Organ</a></li>
              <li class="nav-item"><a class="nav-link" href="/support.html">Support</a></li>
              <li class="nav-item"><a class="nav-link" href="/awareness.html">Awareness</a></li>
              <li class="nav-item"><a class="nav-link" href="/about.html">About</a></li>
              <li class="nav-item"><a class="nav-link" href="/contact.html">Contact</a></li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="userDropdown">
                  <i class="fas fa-user-circle fs-4" style="color: #df684b;"></i>
                  <span id="navbarUsername" class="ms-2" style="color: #df684b; font-weight: 500;"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li><a class="dropdown-item" href="#" onclick="logout()">Logout</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
  <div class="text-center m-4">
    <h2 class="fw-bold fs-1" style="color: #df684b;" >Request an Organ</h2>
    <p class="text-muted fst-italic fs-5 mt-3" >You’re not alone in this fight. Share your details and let the Sanjeevani network help you or<br> your loved one take the first step toward a life-saving transplant.</p>
  </div>
  <form id="requestForm" method="POST" action="/submit-request" enctype="multipart/form-data">
  <section class="d-flex justify-content-center mt-5">
    <div class="form-card custom-form" style="background-color: #faf9f4; width: 90%; max-width: 900px;">
      <h3 class="mb-4 fw-bold" style="color: #df684b;">Patient Information</h3>
      <div class="row g-4">
        <div class="col-md-6">
          <label for="patientFirstName" class="form-label">First Name</label>
          <input type="text" class="form-control" id="patientFirstName" name="patientFirstName" placeholder="Enter patient's first name" required>
        </div>
        <div class="col-md-6">
          <label for="patientLastName" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="patientLastName" name="patientLastName" placeholder="Enter patient's last name" required>
        </div>
        <div class="col-md-6">
          <label for="patientAge" class="form-label">Age</label>
          <input type="number" class="form-control" id="patientAge" min="0" max="120" name="patientAge" placeholder="Enter age" required>
        </div>
        <div class="col-md-6">
          <label for="patientGender" class="form-label">Gender</label>
          <select class="form-select" id="patientGender" name="patientGender" required>
            <option selected disabled value="">Select gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="patientBloodGroup" class="form-label">Blood Group</label>
          <select class="form-select" id="patientBloodGroup" name="patientBloodGroup" required>
            <option selected disabled value="">Select blood group</option>
            <option>O+</option>
            <option>O-</option>
            <option>A+</option>
            <option>A-</option>
            <option>B+</option>
            <option>B-</option>
            <option>AB+</option>
            <option>AB-</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="patientCity" class="form-label">City / District</label>
          <input type="text" class="form-control" id="patientCity"  name="patientCity" placeholder="Enter city or district" required>
        </div>
      </div>
    </div>
  </section>
  <section class="d-flex justify-content-center mt-5">
    <div class="form-card custom-form" style="background-color: #faf9f4; width: 90%; max-width: 900px;">
      <h3 class="mb-4 fw-bold" style="color: #df684b;">Medical Requirements</h3>
      <div class="row g-4">
        <div class="col-md-6">
          <label for="requiredOrgan" class="form-label">Required Organ</label>
          <select class="form-select" id="requiredOrgan" name="requiredOrgan" required>
            <option selected disabled value="">Select organ needed</option>
            <option>Blood</option>
            <option>Kidney</option>
            <option>Liver</option>
            <option>Heart</option>
            <option>Brain</option>
            <option>Lungs</option>
            <option>Corneas</option>
            <option>Bone Marrow</option>
            <option>Skin Tissue</option>
            <option>Intestines</option>
            <option>Pancreas</option>
          </select>
        </div>
        <div class="col-md-6">
            <label for="urgencyLevel" class="form-label">Urgency Level</label>
            <select class="form-select" id="urgencyLevel" name="urgencyLevel" required>
              <option selected disabled value="">Select urgency level</option>
              <option>Emergency (within 1 week)</option>
              <option>High (within 1 month)</option>
              <option>Moderate (within 3 months)</option>
              <option>Low (can wait longer)</option>
            </select>
          </div>
          <div class="col-md-12">
            <label for="medicalCondition" class="form-label">Medical Condition / Diagnosis</label>
            <textarea class="form-control" id="medicalCondition" name="medicalCondition" rows="3" placeholder="Provide a brief description of the medical condition" required></textarea>
          </div>
          <div class="col-md-12">
            <label for="currentHospital" class="form-label">Current Hospital / Treatment Center</label>
            <input type="text" class="form-control" id="currentHospital" name="currentHospital" placeholder="Enter hospital or treatment center name" required>
          </div>        
        </div>
      </div>
  </section>
  <section class="d-flex justify-content-center mt-5">
    <div class="form-card custom-form" style="background-color: #faf9f4; width: 90%; max-width: 900px;">
      <h3 class="mb-4 fw-bold" style="color: #df684b;">Contact Information</h3>
      <div class="row g-4">
        <div class="col-md-6">
          <label for="guardianName" class="form-label">Name of Guardian / Attendee</label>
          <input type="text" class="form-control" id="guardianName" name="guardianName" placeholder="Enter full name" required>
        </div>
        <div class="col-md-6">
          <label for="relation" class="form-label">Relation to Patient</label>
          <input type="text" class="form-control" id="relation"     name="relation" placeholder="e.g., Father, Sister, Friend" required>
        </div>
        <div class="col-md-6">
          <label for="contactNumber" class="form-label">Contact Number</label>
          <input type="tel" class="form-control" id="contactNumber" name="contactNumber" placeholder="Enter phone number" required>
        </div>
        <div class="col-md-6">
          <label for="emailId" class="form-label">Email Address</label>
          <input type="email" class="form-control" id="emailId" name="emailId" placeholder="Enter email address">
        </div>
        <div class="col-md-12">
          <label for="contactAddress" class="form-label">Contact Address</label>
          <textarea class="form-control" id="contactAddress" name="contactAddress" rows="2" placeholder="Enter full address" required></textarea>
        </div>
      </div>
    </div>
  </section>
  <section class="d-flex justify-content-center mt-5">
    <div class="form-card custom-form" style="background-color: #faf9f4; width: 90%; max-width: 900px;">
      <h3>Financial Support (Optional)</h3>
      <div class="mb-3">
        <input type="checkbox" id="needSupport" name="needSupport">
        <label for="needSupport">I need financial support</label>
      </div>
      <div id="supportDetails" style="display:none;">
        <label for="amountRequired">Amount Required (₹)</label>
        <input type="number" name="amountRequired" class="form-control" placeholder="Enter amount in INR" min="0">

        <label for="timeLeft">Time Left (days)</label>
        <input type="number" name="timeLeft" class="form-control" placeholder="Enter time left in days" min="0">

        <label for="supportReason">Support Reason</label>
        <textarea name="supportReason" class="form-control" placeholder="Enter support reason with details"></textarea>
      </div>
    </div>
  </section>
  <section class="d-flex justify-content-center mt-5 mb-5">
    <div class="form-card custom-form" style="background-color: #faf9f4; width: 90%; max-width: 900px;">
      <h3 class="mb-4 fw-bold" style="color: #df684b;">Upload Medical Documents</h3>
      <p class="text-muted mb-3">Please upload any relevant medical reports, diagnosis certificates, prescriptions, or doctor’s letters to support the request.</p>
  
      <div style="border: 2px dashed #e5dcd1; border-radius: 12px; padding: 50px; text-align: center; background-color: #f9f2e7; cursor: pointer;" onclick="document.getElementById('fileInput').click()">
        <i class="fa-solid fa-upload" style="font-size: 32px; color: #7b6a5d;"></i>
        <div style="font-weight: 600; color: #423730; margin-top: 10px;">Click to upload documents</div>
        <div style="color: #7b6a5d;">PDF, DOC, JPG files up to 10MB each</div>
      </div>
      <input type="file" id="fileInput" name="medicalDocuments" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" multiple style="display: none;">
      <ul id="fileList" class="mt-3" style="color: #7b6a5d;"></ul>
      <div class="text-center mt-4">
        <button type="submit" class="btn">Submit Request</button>
      </div>
    </div>
  </section>
  
</form>
  <footer class="footer py-3 text-center mt-5" style="background-color: #df684b;">
    <p style="color: #efe5d6;">&copy; 2025 Sanjeevani. All rights reserved.</p>
  </footer>
  <script>
    document.getElementById("fileInput").addEventListener("change", function () {
      const fileList = document.getElementById("fileList");
      if (fileList) fileList.innerHTML = '';
      Array.from(this.files).forEach(file => {
        const li = document.createElement("li");
        li.textContent = file.name;
        fileList?.appendChild(li);
      });
    });

    document.getElementById("requestForm").addEventListener("submit", function(event) {
      const firstName = document.getElementById("patientFirstName")?.value.trim();
      const lastName = document.getElementById("patientLastName")?.value.trim();
      const age = document.getElementById("patientAge")?.value.trim();
      const gender = document.getElementById("patientGender")?.value;
      const bloodGroup = document.getElementById("patientBloodGroup")?.value;
      const city = document.getElementById("patientCity")?.value.trim();

      const organ = document.getElementById("requiredOrgan")?.value;
      const urgency = document.getElementById("urgencyLevel")?.value;
      const hospital = document.getElementById("currentHospital")?.value.trim();
      const condition = document.getElementById("medicalCondition")?.value.trim();

      const guardianName = document.getElementById("guardianName")?.value.trim();
      const relation = document.getElementById("relation")?.value.trim();
      const contactNumber = document.getElementById("contactNumber")?.value.trim();
      const email = document.getElementById("emailId")?.value.trim();
      const address = document.getElementById("contactAddress")?.value.trim();

      const files = document.getElementById("fileInput")?.files;

      if (!firstName || !lastName || !age || !gender || !bloodGroup || !city ||
          !organ || !urgency || !condition || !hospital || !guardianName || !relation || !contactNumber || !email || !address ||
          !files || files.length === 0) {
        alert("Please fill in all required fields and upload at least one document.");
        event.preventDefault();
      }
    });
    document.getElementById("needSupport").addEventListener("change", function () {
  const supportBox = document.getElementById("supportDetails");
  const amountField = document.querySelector("input[name='amountRequired']");
  const timeField = document.querySelector("input[name='timeLeft']");
  const reasonField = document.querySelector("textarea[name='supportReason']");

  if (this.checked) {
    supportBox.style.display = "block";
    amountField.required = true;
    timeField.required = true;
    reasonField.required = true;
  } else {
    supportBox.style.display = "none";
    amountField.required = false;
    timeField.required = false;
    reasonField.required = false;

    amountField.value = "";
    timeField.value = "";
    reasonField.value = "";
  }
});
function logout() {
  localStorage.removeItem("username");
  alert("Logged out successfully.");
  window.location.href = "/login.html";
}
    const username = localStorage.getItem("username");

if (!username) {
  alert("Please log in first.");
  window.location.href = "/login.html";
}

if (username) {
  const dropdown = document.querySelector(".dropdown-menu");
  const userItem = document.createElement("li");
  userItem.innerHTML = `<a class="dropdown-item disabled">Hi, ${username}</a>`;
  dropdown.prepend(userItem);
}
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>